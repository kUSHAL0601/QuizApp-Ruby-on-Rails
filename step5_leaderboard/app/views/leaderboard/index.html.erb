<form action="/leaderboard/bygen" method="get" id="form1" style="display:none">
<input type="text" name="gennm" id="gennm"></input>
</form>

<form action="/leaderboard/bysubgen" method="get" id="form2" style="display:none">
<input type="text" name="subgennm" id="subgennm"></input>
</form>
<style type="text/css">
	div.tab {
    overflow: hidden;
}

div.tab button {
    background-color: inherit;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    transition: 0.3s;
}

div.tab button:hover {
    background-color: #ddd;
}

div.tab button.active {
    background-color: #ccc;
}

.tabcontent {
    display: none;
    padding: 6px 12px;
    border-top: none;
}
</style>

 <div class="tab">
  <button class="tablinks" onclick="openTab('Genre')">By Genre</button>
  <button class="tablinks" onclick="openTab('Subgenre')">By Subgenre</button>
</div>
<p id="123" style="display:none"><%= $by %></p>
<div id="Genre" class="tabcontent">
<br>
<br>
   <select name="gen" id="gen" onchange="foo1()">
    <% $lb_gen.each do |genre| %>
    	<%if genre.name==$lb_curgen %>
        <option value=<%= genre.name %> selected="selected"><%= genre.name %></option>
        <% else %>
        <option value=<%= genre.name %>><%= genre.name %></option>
        <% end %>
      <% end %>
    </select>
    <br>
    <br>
    <%if $lbqgen!=[] %>
    <h1>Leaderboard By Genre</h1>
    <table>
    <tr>
    <th>Username</th>
    <th>Score</th>
    </tr>
    <% $lbqgen.each do |rows| %>
    	<tr>
    		<td><%=rows[0]%></td>
    		<td><%=rows[1]%></td>
    	</tr>
	<% end %>

    </table>
    <%else%>
    <h1>No data to show</h1>
    <%end%>
</div>

<div id="Subgenre" class="tabcontent">
<br>
<br>
   <select id="subgen" name="subgen" if="subgen" onchange="foo2()">
    <% $lb_subgen.each do |sub_genre| %>
    <%if sub_genre.subgen==$lb_cursubgen %>
      <option value=<%= sub_genre.subgen %> selected="selected"><%= sub_genre.subgen %></option>
    <%else%>
      <option value=<%= sub_genre.subgen %>><%= sub_genre.subgen %></option>
    <%end%>
    <% end %>
    </select>
    <br>
    <br>
    <%if $lbqsubgen!=[] %>
    <h1>Leaderboard by Subgenre</h1>
    <table>
    <tr>
    <th>Username</th>
    <th>Score</th>
    </tr>
    <% $lbqsubgen.each do |rows| %>
    	<tr>
    		<td><%=rows[0]%></td>
    		<td><%=rows[1]%></td>
    	</tr>
	<% end %>

    </table>
    <%else%>
    <h1>No data to show</h1>
    <%end%>
</div>

<script type="text/javascript">
  
  function foo1(){
    var e=document.getElementById('gen');
    document.getElementById('gennm').value=e.options[e.selectedIndex].value;
    document.getElementById('form1').submit();
  }
  function foo2(){
    var e=document.getElementById('subgen');
    document.getElementById('subgennm').value=e.options[e.selectedIndex].value;
    document.getElementById('form2').submit();
  }

  function openTab(tabName) {
    var i, tabcontent, tablinks;

    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }

    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
} 
if(document.getElementById('123').innerHTML=="1")
	openTab('Genre');
if(document.getElementById('123').innerHTML=="2")
	openTab('Subgenre');
</script>
<%= link_to "Back to homepage", admin_path%>